@model IEnumerable<FshopASP.Models.Cart>

@{
    ViewBag.title = "Giỏ hàng";
    Layout = "_LayoutTemplate";
    int total(int price, int quantity)
    {
        return price * quantity;
    }

    int TotalBill()
    {
        int sum = 0;
        foreach(var item in Model)
        {
            sum += item.Product.Price * item.Quantity;
        }
        return sum;
    }

}
@section Top{
    <partial name="_header" />
}
@section Bottom {
    <partial name="_footer" />

}
<!-- breadcrumb-section -->
<div class="breadcrumb-section breadcrumb-bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 offset-lg-2 text-center">
                <div class="breadcrumb-text">
                    <p>Fresh and Organic</p>
                    <h1>Cart</h1>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end breadcrumb section -->
<!-- cart -->
@if (ViewBag.Username != null)
{
    <div class="cart-section mt-150 mb-150">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-12">
                    <div class="cart-table-wrap">
                        <table class="cart-table">
                            <thead class="cart-table-head">
                                <tr class="table-head-row">
                                    <th class="product-remove"> @Html.DisplayNameFor(model => model.Product)</th>
                                    <th class="product-image"> @Html.DisplayNameFor(model => model.Product.Image)</th>
                                    <th class="product-name"> @Html.DisplayNameFor(model => model.Product.Name)</th>
                                    <th class="product-price"> @Html.DisplayNameFor(model => model.Product.Price)</th>
                                    <th class="product-quantity"> @Html.DisplayNameFor(model => model.Quantity)</th>
                                    <th class="product-total">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr class="table-body-row">
                                        <td class="product-remove"><a href="#"><i class="far fa-window-close"></i></a></td>
                                        <td class="product-image"><img src="../assets/img/products/@item.Product.Image" alt=""></td>
                                        <td class="product-name">@item.Product.Name</td>
                                        <td class="product-price">$@item.Product.Price</td>
                                        <td class="product-quantity"><input type="number" value="@item.Quantity"></td>
                                        <td class="product-total">$@total(item.Product.Price, item.Quantity)</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="total-section">
                        <table class="total-table">
                            <thead class="total-table-head">
                                <tr class="table-total-row">
                                    <th>Tổng</th>
                                    <th>Giá</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="total-data">
                                    <td><strong>Tổng hóa đơn: </strong></td>
                                    <td>$@TotalBill()</td>
                                </tr>
                                <tr class="total-data">
                                    <td><strong>Tiền ship: </strong></td>
                                    <td>$0</td>
                                </tr>
                                <tr class="total-data">
                                    <td><strong>Total: </strong></td>
                                    <td>$@TotalBill()</td>
                                </tr>
                            </tbody>
                        </table> 
                        <div class="cart-buttons">
                            <a asp-controller="Carts" asp-action="UpdateCart" class="boxed-btn">Cập nhật giỏ hàng</a>
                            <a asp-controller="Carts" asp-action="Checkout" class="boxed-btn black">CheckOut</a>
                        </div>
                    </div>

                    <div class="coupon-section">
                        <h3>Nhập Mã Voucher</h3>
                        <div class="coupon-form-wrap">
                            <form action="index.html">
                                <p><input type="text" placeholder="Mã voucher"></p>
                                <p><input type="submit" value="Apply"></p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else{

<div style="height:300px;width:max-content">
    <h6 style="text-align:center">
        Bạn chưa có sản phẩm nào trong giỏ hàng
    </h6>
</div>
}
<!-- end cart -->
<!-- logo carousel -->
<div class="logo-carousel-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="logo-carousel-inner">
                    <div class="single-logo-item">
                        <img src="../assets/img/company-logos/1.png" alt="">
                    </div>
                    <div class="single-logo-item">
                        <img src="../assets/img/company-logos/2.png" alt="">
                    </div>
                    <div class="single-logo-item">
                        <img src="../assets/img/company-logos/3.png" alt="">
                    </div>
                    <div class="single-logo-item">
                        <img src="../assets/img/company-logos/4.png" alt="">
                    </div>
                    <div class="single-logo-item">
                        <img src="../assets/img/company-logos/5.png" alt="">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end logo carousel -->